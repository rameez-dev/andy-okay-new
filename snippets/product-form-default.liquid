{%- comment -%}
Those are the option names for which we automatically detect swatch. For the color, we use them to display a swatch,
while 
for size, we use it to display a size chart (if applicable)
{%- endcomment -%}  

<style>
  .hide-on-pdp{
    display: none !important;
  }
  .info-with-icon strong{
    /* color: #434343; */
  } 
</style>
<style>
    .left__text{
      position: relative;
      /*height: 16px;*/
      width: 100%;
      /*right: 25px;*/
    }
    .text-vertical-center{
      /*(width: 80%;
      margin: 0;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);*/
      padding-top: 3px;
    }
    .thinnerButton{
      height : 48px;
    }
    .smallerText{
      font-size: 16px;
    }
    .Button__SeparatorLine{
      height: 18px;
      width: 1px;
      margin: 10px;
      background-color: #a0a7cc;
    }
    .separator-align-right{
      position: absolute;
      right: 50px;
    }
    .price-align-right{
      position: absolute;
      right: 20px;
    }
    .price-align-right-top{
      position: absolute;
      top: 10px;
      right: 20px;
    }
    .price-align-right-bottom{
      font-family: 'Adobe Caslon Pro';
      font-size: 10px;
      color: #a0a7cc;
      position: absolute;
      top: 30px;
      right: 20px;
    }
    .leftAligned_imp{
      text-align: left !important;
    }
    .Block_imp{
      display: block !important;
    }
    #custom_color_offer_ending {
      color: #813422;
    } 
   
    .noTopmargin{
      margin-top: 0px !important;
    }
  </style>

<style>


.cart-animation {
    width: 25px;
    height: 25px;
    border-radius: 50%;
    position: absolute;
    display: block;
    z-index: 15;
    text-align: center;
    line-height: 25px;
    background: #39b975 !important;
    color: #fff !important;
    font-weight: 700;
    border: 3px solid #39b975;
    font-size: 16px;
  }

  #cart-popup-overlay {
    position: fixed;
    display: none;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 2;
    cursor: pointer;
  }

  .charity-organisations-container {
    margin-top: 40px;
  }

  .xs-p-wrap {
    padding: 20px 0px;
    margin-top: 25px;
  }

  .about-your-donation {
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    /* text-decoration: underline; */
    color: #959595;
    font-family: 'Adobe Caslon Pro';
    text-underline-offset: 5px;
    margin-bottom: 5px;
    font-size: 15px;
  }

  .about-your-donation .question-icon {
    display: inline-block;
    height: 15px;
    margin-left: 8px;
    opacity: 0.3;
  }

  @media screen and (max-width: 767px) {
    .xs-p-wrap {
      margin-top: 20px;
    }
  }

  .xs-p-text {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 0px;
  }

  @media screen and (max-width: 767px) {
    .xs-p-text {
      align-items: start;
    }
  }

  .xs-p-text span {
    font-weight: bold;
    font-size: 1.4em;
  }

  .xs-p-text span:first-child {
    font-weight: 500;
    font-size: 1.5em;
  }

  .xs-pwyw {
    width: 100%;
  }

  #xs-price-range {
    width: 100%;
    /*             position: absolute; */
    top: 50%;
    left: 50%;
    -webkit-transform: translate(-50%, -50%);
    -moz-transform: translate(-50%, -50%);
    -o-transform: translate(-50%, -50%);
    -ms-transform: translate(-50%, -50%);
    transform: translate(-50%, -50%);
    border: 0;
    height: 6px;
    background: #bababa;
    outline: none;
    border-radius: 0px;
  }

  .ui-corner-all {
    border-radius: 0px;
  }

  #xs-price-range .ui-slider-handle {
    position: relative;
    border-radius: 100%;
    background: {{ section.settings.pwyw_btn_color }};
    border: 0;
    height: 40px;
    width: 40px;
    outline: none;
    cursor: pointer;
    top: 50%;
    transform: translateY(-50%);
    box-shadow: 0px 3px 3px -2px #585858;
    border: 0px solid #eee;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  #xs-price-range #mark-1 {
    z-index: 25;
  }

  #xs-price-range #mark-2 {
    z-index: 24;
  }

  #xs-price-range #mark-3 {
    z-index: 23;
  }

  #xs-price-range .ui-slider-handle:hover,
  #xs-price-range .ui-slider-handle:focus {
    -webkit-transform: scale(1.1);
    -moz-transform: translateY(-50%) scale(1.1);
    -o-transform: translateY(-50%) scale(1.1);
    -ms-transform: translateY(-50%) scale(1.1);
    transform: translateY(-50%) scale(1.1);
  }

  #xs-price-range .ui-slider-range {
    background: #163bbc;
  }

  #xs-price-range #xs-charity-price {
    /*             position: absolute;
      font-size: 12px;
      font-weight: bold;
      color: #b8b8b8;
      width: 160px;
      text-align: center;
      margin-top: -40px; */
  }

  span.xs-r-arrows {
    font-size: 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    padding: 0px 10px;
  }

  span.xs-r-arrows i:first-child {
    margin-right: 5px;
  }

  .ProductMeta__PriceList {
    display: none;
  }

  .xs-marks-container {
    position: relative;
    left: 0;
    right: 0;
    border: 1px solid transparent;
    top: -3px;
  }

  .xs-mark {
    width: 1px;
    height: 20px;
    /*background: #5d5d5d;*/
    position: absolute;
    bottom: 0;
    z-index: 2;
    display: flex;
    justify-content: center;
  }

  .xs-mark .label-1 {
    position: absolute;
    width: max-content;
    display: inline-table;
    bottom: 17px;
    padding: 4px 7px;
    font-size: 9px;
    color: #ffffff;
    border: 1px solid gray;
    text-transform: initial;
    border-radius: 5px;
    letter-spacing: 0;
    background: transparent;
  }

  .xs-mark .label-1:after {
    width: 0;
    height: 0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    content: "";
    position: absolute;
    left: 0;
    right: 0;
    margin: 0px auto;
    bottom: -8px;
    border-top: 8px solid #354c34;
  }

  .xs-mark .label-1:before {
    width: 0;
    height: 0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    content: "";
    position: absolute;
    left: 0;
    right: 0;
    margin: 0px auto;
    bottom: -8px;
    border-top: 8px solid #354c34;
    z-index: 1;
  }

  .xs-mark .label-2 {
    position: absolute;
    width: max-content;
    display: inline-table;
    bottom: 17px;
    padding: 4px 7px;
    font-size: 9px;
    color: #ffffff;
    border: 1px solid gray;
    text-transform: initial;
    border-radius: 5px;
    letter-spacing: 0;
    background: transparent;
  }

  .xs-mark .label-2:after {
    width: 0;
    height: 0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    content: "";
    position: absolute;
    left: 0;
    right: 0;
    margin: 0px auto;
    bottom: -8px;
    border-top: 8px solid #2c4a58;
  }

  .xs-mark .label-2:before {
    width: 0;
    height: 0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    content: "";
    position: absolute;
    left: 0;
    right: 0;
    margin: 0px auto;
    bottom: -8px;
    border-top: 8px solid #2c4a58;

  }

  .xs-mark .label-3 {
    position: absolute;
    width: max-content;
    display: inline-table;
    bottom: 17px;
    padding: 4px 7px;
    font-size: 9px;
    color: #ffffff;
    border: 1px solid gray;
    text-transform: initial;
    border-radius: 5px;
    letter-spacing: 0;
    background: transparent;
  }

  .xs-mark .label-3:after {
    width: 0;
    height: 0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    content: "";
    position: absolute;
    left: 0;
    right: 0;
    margin: 0px auto;
    bottom: -8px;
    border-top: 8px solid #2c4a58;
  }

  .xs-mark .label-3:before {
    width: 0;
    height: 0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    content: "";
    position: absolute;
    left: 0;
    right: 0;
    margin: 0px auto;
    bottom: -8px;
    border-top: 8px solid #2c4a58;

  }

  .xs-mark .label-1.active-1 {
    background: #74d070 !important;
    border: 1px solid #74d070 !important;
  }

  .xs-mark .label-1.active-1:before {
    border-top: 8px solid #74d070;
  }

  .xs-mark .label-2.active-2 {
    background: #6dbff2 !important;
    border: 1px solid #6dbff2 !important;
  }

  .xs-mark .label-2.active-2:after {
    border-top: 8px solid #6dbff2;
  }

  .xs-mark .label-3.active-3 {
    background: #6dbff2 !important;
    border: 1px solid #6dbff2 !important;
  }

  .xs-mark .label-3.active-3:after {
    border-top: 8px solid #6dbff2;
  }

  #label-mark-1 {
    background: #354c34;
    border: 1px solid #354c34;
  }

  #label-mark-2 {
    background: #2c4a58;
    border: 1px solid #2c4a58;
  }

  #label-mark-3 {
    background: #2c4a58;
    border: 1px solid #2c4a58;
  }

  .xs-mark .label.active:after {
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    border-top: 8px solid #41a84f;
  }

  .xs-mark .label.active:before {
    display: none;
  }

  .delivery-message {
    margin: 10px 0;
    font-size: 15px;
    font-family: "DIN Next LT Pro Cond";
    font-weight: 500;
    font-style: normal;
    color: #fff;
  }

  .svelte-u7o1iy {
    background-color: #eaeaea;
    background-position: 50%;
    background-size: contain;
    border-radius: 100%;
    height: 23px;
    width: 23px;
  }

  .noframe.svelte-u7o1iy:before {
    background-color: #c6c6c6;
    content: "";
    height: 1px; 
    left: 4px;
    position: absolute;
    top: 3px; 
    transform: rotate(45deg);
    transform-origin: left;
    width: 100%;
  }

  .reset-money {
    color: #af182b;
  }

  .reset-compare-price {
    color: #b5b5b5;
    text-decoration: line-through;
    white-space: nowrap;
  }
</style>

<style>
  .product__cart--form .xs-p-text .price_value {
    right: 30px;
  }

  #donation-drop-down-menu {
    display: block;
    padding-top: 10px;
  }

  [type="radio"]:checked,
  [type="radio"]:not(:checked) {
    visibility: hidden;
  }

  input[name='donation']:after {
    border-radius: 100%;
    left: 0;
    top: 2px;
    width: 13px;
    height: 13px;
    position: relative;
    background-color: #fff;
    content: '';
    display: inline-block;
    visibility: visible;
    border: 1px solid #a0a0a0;
  }

  input[name="donation"]:checked:after {
    width: 13px;
    height: 13px;
    border-radius: 100%;
    left: 0;
    top: 2px;
    position: relative;
    background-color: #163bbc;
    content: '';
    display: inline-block;
    border: 1px solid #163bbc;
  }

  input[name='gallery-frame']:after {
    width: 18px;
    height: 18px;
    position: relative;
    background-color: #fff;
    content: '';
    display: inline-block;
    border: 1px solid black;
    cursor: pointer;
  }

  input[name="gallery-frame"]:checked:before {
    width: 18px;
    height: 18px;
    position: relative;
  /*  background-color: #fff; */
    background-color: #2200cc;
    content: '';
    display: inline-block;
    border: 1px solid black;
    cursor: pointer;
  }

  input[name="gallery-frame"]:checked:after {
    width: 12px;
    height: 12px;
    border: unset;
    position: relative;
    /* background-color: black; */
    background-color: #2200cc;
    content: '';
    display: inline-block;
    visibility: visible;
    /* bottom: 22px; */
    /* left: 3px; */
    cursor: pointer;
  }
</style>

<style>
  .NewsletterPopup {
    padding: 0 0 0 0 !important;
  }

  .NewsletterPopup__Close.site__black--close {
    width: 25px;
    height: 25px;
    right: 5px;
    top: 5px;
    padding: 0;
  }

  .NewsletterPopup__Close.site__black--close svg {
    width: 12px;
    height: 12px;
  }

  .NewsletterPopup.site__black--popup .NewsletterPopup__Content {
    padding: 30px 20px;
  }


  /* mat board gallery frame */
  .passecontainer{
    display: flex;
    align-items: stretch;
    margin: 7px 0;
    margin: 10px 10px 8px 5px;
  }
  .mat_board_input_container{
    display: block;
    font-size: 0px;
  }
  .passe-text-icon-container{
    width: 75%;
    height: 100%;
    display: flex;
    align-items: center;
  }
  .passe-text-icon-container-faded{
    opacity: 0.3;
  }
  .passe-toptext-icon-container{
    display: flex;
    align-items: center;
    position: relative;
  }
  .passe-gallery-experience-icon {
    height: 14px;
    display: inline-block;
    cursor: pointer;
  }
  .passe-text-icon-container-faded .passe-gallery-experience-icon {
    opacity: 0.5;
  }
  /* opacity changes the img */
  /* .passe-gallery-experience-icon-small {
    opacity: 1;
  } */
  .passe-toptext-title{
    padding: 0 10px; 
    color: #707070;
    font-family: 'Adobe Caslon Pro';
    line-height: 1;
    margin-top: 3px;
  }
  .passe-bottomtext{
    margin-top: 3px;
  }
  .passe-money{
    text-transform: uppercase;
    letter-spacing: 1px;
    font-family: 'DIN Next LT Pro Bold';
    font-weight: 700;
    text-align: right;
    font-size: 14px;
    width: 25%;
    position: relative;
    top: 3px;
    color: #707070;
    opacity: 0.3;
    line-height: 1;
  }
  #reset-passe-money {
    white-space: nowrap;
  }
  input[name='gallery-no-frame']:after {
    width: 16px;
    height: 16px;
    position: relative;
    background-color: #fff;
    content: '';
    display: inline-block;
    border: 1px solid black;
    cursor: pointer;
    opacity: 0.3;
  }

  @media only screen and (max-width: 768px) {
    .passecontainer {
      margin-top: 8px;
    }
    .passe-toptext-title{
      font-size: 14px;
    }
    .passe-gallery-experience-icon {
      height: 12px;
    }
  }
  input[name='gallery-frame']:after {
    width: 16px;
    height: 16px;
    position: relative;
    background-color: #fff;
    content: '';
    display: inline-block;
    border: 1px solid black;
    cursor: pointer;
  }
  input[name="gallery-frame"]:checked:before {
    width: 16px;
    height: 16px;
    position: relative;
   /* background-color: #fff; */
    background-color: #2200cc;
    content: '';
    display: inline-block;
    border: 1px solid black;
    cursor: pointer;
  }
  input[name="gallery-frame"]:checked:after {
    width: 12px;
    height: 12px;
    position: relative;
    border: unset;
   /* background-color: black; */
    background-color: #2200cc;
    /* content: ''; */
    content: unset;
    display: inline-block;
    visibility: visible;
    /* bottom: 21px; */
    /* left: 2px; */
    cursor: pointer;
  }
  /* @media only screen and (max-width: 480px)   {
    input[name="gallery-frame"]:checked:after {
        bottom: 21px;
      }
  } */
  .Disabled{
    pointer-events: none;
    cursor: not-allowed;
    opacity: 0.65;
    filter: alpha(opacity=65);
    -webkit-box-shadow: none;
    box-shadow: none;
  }
</style>

{% assign counter = 0 %}
<script>
  const xs_format = "{{ shop.money_format }}";
  const xs_product_id = "{{product.id }}";
</script>

{% assign has_max_price = false %}
{% assign isFrame = false %} 
{% for tag in product.tags %}
{% if tag contains "xs_max" %}
{% assign has_max_price = true %}
{% assign max_price = tag | split: "-" |last %}
{% endif %}
{% if tag contains "Frames" %}
{% assign isFrame = true %}
{% endif %}
{% endfor %}

<script>
  window.xVariants = {};
  {% for variant in product.variants %}
  xVariants["{{ variant.id }}"] = {{ variant | json }};
  {% endfor %}
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prefixfree/1.0.7/prefixfree.min.js"></script>
{%- assign color_label = 'color,colour,couleur,colore,farbe,색,色,färg,farve' | split: ',' -%}
{%- assign size_label = 'size,taille,bröße,tamanho,tamaño,koko,サイズ' | split: ',' -%}

{%- assign size_chart_page = '' -%}
{%- assign product_popovers = '' -%}
{%- assign show_option_label = false -%}

{% assign mat_board_product = all_products['white-gallery-mat-board'] %}
{% assign charity_product = all_products['charity-organisations'] %}
{%- assign white_frames = all_products['white-gallery-frame'] -%}
{%- assign black_frames = all_products['black-gallery-frame'] -%}
{%- assign oak_frames = all_products['oak-gallery-frame'] -%}

{% for tag in product.tags %}
  {% assign product_tag_first = tag | downcase | split: ':' | first %}
  {% if product_tag_first == 'charity' %}
    {% assign charity_org = tag | split: ':' | last | split: '-' | join: ' ' |  downcase |  replace: " ", "-"  %}
  {% endif %}
{% endfor %}

{% assign has_charity = false %}
{% for c_variant in charity_product.variants %}
  {% assign charity_title = c_variant.title |  downcase |  replace: " ", "-"  %}
  {% if charity_title == "non-violence" %}
    {% assign charity_title = "non-violence-project" %}
  {% endif %}
  {% if charity_title == charity_org %} 
    {% assign has_charity = true %}
  {% endif %}
{% endfor %}

{% if isFrame == true %}
<script>const isFrame = true;</script>
{% else %}
<script>const isFrame = false;</script>
{% endif %}

<script> 
  let black_variants = [], white_variants = [], oak_variants = [], mat_board_variants = [], frames_all_variants = {};
  frames_all_variants['0'] = { 'price': 0, 'compare_at_price': 0 };
</script>
{%- for black_item in black_frames.variants -%}
  <script>
    black_variants.push({ 'id': '{{black_item.id}}', 'title': '{{black_item.title}}', 'price': '{{black_item.price | money_without_trailing_zeros}}', 'compare_at_price': '{{black_item.compare_at_price | money_without_trailing_zeros}}' });
    frames_all_variants['{{black_item.id}}'] = {{ black_item | json }};
  </script>
{%- endfor -%}
{%- for white_item in white_frames.variants -%}
  <script>
    white_variants.push({ 'id': '{{white_item.id}}', 'title': '{{white_item.title}}', 'price': '{{white_item.price | money_without_trailing_zeros}}', 'compare_at_price': '{{white_item.compare_at_price | money_without_trailing_zeros}}' });
    frames_all_variants['{{white_item.id}}'] = {{ white_item | json }};
  </script>
{%- endfor -%}
{%- for oak_item in oak_frames.variants -%}
  <script>
    oak_variants.push({ 'id': '{{oak_item.id}}', 'title': '{{oak_item.title}}', 'price': '{{oak_item.price | money_without_trailing_zeros}}', 'compare_at_price': '{{oak_item.compare_at_price | money_without_trailing_zeros}}' });
    frames_all_variants['{{oak_item.id}}'] = {{ oak_item | json }};
  </script>
{%- endfor -%}
{%- for mat_item in mat_board_product.variants -%}
  <script>
    mat_board_variants.push({ 'id': '{{mat_item.id}}', 'title': '{{mat_item.title}}', 'price': '{{mat_item.price | money_without_trailing_zeros}}', 'compare_at_price': '{{mat_item.compare_at_price | money_without_trailing_zeros}}' });
  </script>
{%- endfor -%}

{%- assign selected_variant = product.selected_or_first_available_variant -%}

{%- form 'product', product, class: 'ProductForm' -%}
<div class="ProductForm__Variants">
  {%- unless product.has_only_default_variant -%}

  {% comment %} product options label {% endcomment %}
  {%- for option in product.options_with_values -%}
    {%- assign downcase_option = option.name | downcase -%}

    {%- if section.settings.selector_mode == 'block' or color_label contains downcase_option and
    section.settings.show_color_swatch -%}
    {%- assign show_option_label = true -%}
    {%- endif -%}
  {%- endfor -%}
  {% comment %} product options label {% endcomment %}

  {% comment %} product options {% endcomment %}
  {%- for option in product.options_with_values -%}
      {%- assign downcase_option = option.name | downcase -%}
      {%- capture popover_id -%}popover-{{ product.id }}-product-template-{{ option.name | handle }}{%- endcapture -%}

    <div class="ProductForm__Option {% if show_option_label %}ProductForm__Option--labelled{% endif %}">
      {%- if show_option_label -%}
        {%- assign size_chart_page = pages['size-chart'] -%}
        {% comment %}
        <span class="ProductForm__Label">
          {% if color_label contains downcase_option and section.settings.show_color_swatch %}
          <span class="ProductForm__SelectedValue">{{ option.selected_value }}</span>
          {% endif %}

          {%- if size_label contains downcase_option and size_chart_page != empty -%}
          <button type="button" class="ProductForm__LabelLink Link Text--subdued" data-action="open-modal"
            aria-controls="modal-{{ size_chart_page.handle }}">
            {{- 'product.form.size_chart' | t -}}
          </button>
          {%- endif -%}
        </span>
        {% endcomment %}
      {%- endif -%}

      {%- if color_label contains downcase_option and section.settings.show_color_swatch -%}
        <ul class="ColorSwatchList HorizontalList HorizontalList--spacingTight">
          {%- for value in option.values -%}
          {%- assign downcase_value = value | downcase -%}

          <li class="HorizontalList__Item">
            {%- assign color_swatch_name = value | handle | append: '.png' -%}
            {%- assign color_swatch_image = images[color_swatch_name] -%}

            <input id="option-product-template-{{ forloop.parentloop.index0 }}-{{ forloop.index0 }}"
              class="ColorSwatch__Radio" type="radio" name="option-{{ forloop.parentloop.index0 }}"
              value="{{ value | escape }}" {% if value==option.selected_value %}checked="checked" {% endif %}
              data-option-position="{{ option.position }}">
            <label for="option-product-template-{{ forloop.parentloop.index0 }}-{{ forloop.index0 }}"
              class="ColorSwatch ColorSwatch--large {% if downcase_value == 'white' %}ColorSwatch--white{% endif %}"
              data-tooltip="{{ value | escape }}"
              style="background-color: {{ value | replace: ' ', '' | downcase }}; {% if color_swatch_image != blank %}background-image: url({{ color_swatch_image | img_url: '64x64' }}){% endif %}">
              <span class="u-visually-hidden">{{ value }}</span>
            </label>
          </li>
          {%- endfor -%}
        </ul>
      {%- elsif section.settings.selector_mode == 'block' -%}
        {% comment %} options for sizes {% endcomment %}
        {% if option.name == 'Size' %}
          <div class="dp-product-section-size-main" data-orientation="horizontal">
            <div class="dp-product-section-head dp-product-section-head-custom">
              <span class="label">Choose size</span>
              <div class="dp-size-tab-list">
                  <div class="dp-size-list-item inches selected">in</div>
                  <div class="dp-size-list-item centimeters">cm</div>
              </div>
              <div class="size-chart-main">
                <img class="size-chart-img" src="{{ 'ruler.png' | asset_url }}" >
                <span id="size-chart" class="size__ChartLink dp-product-section-head-italic">Size Guide</span>
              </div>
            </div>
            <div class="dp-product-section-size-selectors-container open">
            {%- for value in option.values -%}
              {%- for variant in product.variants -%} 
                {% if variant.option1 == value %}
                  {% assign size_fixed_price = variant.price %}
                  {% assign size_fixed_compare_at_price = variant.compare_at_price %}
                {% endif %}
              {% endfor %}
              {% assign variant_values = value | split: ' ' %}
              <input id="option-product-template-{{ forloop.parentloop.index0 }}-{{ forloop.index0 }}"
                class="dp-product-section-size-selector-input" type="radio" name="option-{{ forloop.parentloop.index0 }}"
                value="{{ value | escape }}" {% if value==option.selected_value %}checked="checked" {% endif %}
                data-option-position="{{ option.position }}">
              <label for="option-product-template-{{ forloop.parentloop.index0 }}-{{ forloop.index0 }}"
                class="dp-product-section-size-selector {% if value == option.selected_value %} currently-selected-size-display {% endif %}">
               {%- assign show = '' -%}
               {%- assign show_grade = '' -%}
               {%- assign popular_class = '' -%}
               {%- assign best_class = '' -%}
               {%- if variant_values.first == 'MEDIUM'  -%}
                  {%- assign show = 'M' -%}
               {%- elsif variant_values.first == 'LARGE'  -%}
                  {%- assign show = 'L' -%}
                  {%- assign show_grade = 'Most Popular' -%}
                  {%- assign popular_class = 'popular' -%}
               {%- elsif variant_values.first == 'X-Large'  -%}
                    {%- assign show = 'XL' -%}
                    {%- assign show_grade = 'Best Value' -%}
                    {%- assign best_class = 'best' -%}
               {%- elsif variant_values.first == 'GIANT'  -%}
                    {%- assign show = 'GIANT' -%}
               {%- endif -%}
                <div class="dp-product-section-size-selector-name-grade">
                  <div class="name-grade-left-section">
                    <div class="dp-product-section-size-selector-name">
                      {{show}}
                    </div>
                    <div class="dp-product-section-size-selector-grade {{ popular_class }} {{ best_class }}">
                      {{show_grade}}
                    </div>
                    <div class="size-right-section">
                      <div class="dp-product-section-size-selector-dimensions inches-detail">
                        {{variant_values[1]}} 
                      </div>
                      <div class="dp-product-section-size-selector-dimensions centimeters-detail">
                        {{variant_values.last}}
                      </div>
                    </div>
                </div>
                </div>
                <div class="dp-product-section-size-selector-price">
                  {% if size_fixed_price %}
                    <div><span class="reset-compare-price"  with_no_frame="{{ size_fixed_compare_at_price }}" with_black_frame="{{ black_frame_compare_at_price }}">{{size_fixed_compare_at_price | money_without_trailing_zeros}}</span></div>  
                    <div><span class="reset-money"  with_no_frame="{{ size_fixed_price }}" with_black_frame="{{ black_frame_price  }}">{{size_fixed_price | money_without_trailing_zeros}}</span></div>  
                  {% endif %}
                </div>
                <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon--wide icon-chevron-down"
                  viewBox="0 0 498.98 284.49">
                  <defs></defs>
                  <path fill="#231f20"
                    d="M80.93 271.76A35 35 0 0 1 140.68 247l189.74 189.75L520.16 247a35 35 0 1 1 49.5 49.5L355.17 511a35 35 0 0 1-49.5 0L91.18 296.5a34.89 34.89 0 0 1-10.25-24.74z"
                    transform="translate(-80.93 -236.76)"></path>
                </svg>
              </label>
            {% endfor %}
            </div>
          </div>
        {% endif %}
        {% comment %} options for sizes {% endcomment %}

      {%- else -%}
        <button type="button" class="ProductForm__Item" aria-expanded="false" aria-controls="{{ popover_id }}">
          <span class="ProductForm__OptionName">{% unless show_option_label %}{{ option.name }}: {% endunless %}<span
              class="ProductForm__SelectedValue">{{ option.selected_value }}</span></span>
          {%- include 'icon' with 'select-arrow' -%}
        </button>
        {%- capture popover_html -%}
          {%- if color_label contains downcase_option and section.settings.show_color_carousel -%}
            {%- for value in option.values -%}
              {%- if value == option.selected_value -%}
                {%- assign initial_image_index = forloop.index0 -%}
                {%- break -%}
              {%- endif -%}
            {%- endfor -%}

            {%- capture flickity_options -%}
            {
            "prevNextButtons": true,
            "pageDots": true,
            "initialIndex": {{ initial_image_index }},
            "arrowShape": {"x0": 20, "x1": 60, "y1": 40, "x2": 60, "y2": 35, "x3": 25}
            }
            {%- endcapture -%}
            <div id="{{ popover_id }}" class="VariantSelector" aria-hidden="true">
              {%- capture option_index -%}option{{ option.position }}{%- endcapture -%}

              <div class="VariantSelector__Carousel Carousel" data-flickity-config='{{ flickity_options }}'>
                {%- for value in option.values -%}
                  {%- for variant in product.variants -%}
                    {%- if variant[option_index] == value -%}
                      {%- assign variant_image = variant.image | default: product.featured_image -%}
                      {%- break -%}
                    {%- endif -%}
                  {%- endfor -%}
                  <div class="VariantSelector__Item Carousel__Cell {% if value == option.selected_value %}is-selected{% endif %}"
                    data-background-color="{{ value | split: ' ' | last | handle }}"
                    data-background-image="{{ value | handle | append: '.png' | asset_url }}"
                    data-option-position="{{ option.position }}" data-option-value="{{ value | escape }}">
                    <div class="VariantSelector__ImageWrapper AspectRatio AspectRatio--withFallback"
                      style="max-width: {{ variant_image.width }}px; padding-bottom: {{ 100.0 | divided_by: variant_image.aspect_ratio }}%; --aspect-ratio: {{ variant_image.aspect_ratio }}">
                      {%- include 'image-size', sizes: '200,400,600,800', image: variant_image -%}
                      {%- assign image_url = variant_image | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}

                      <img class="VariantSelector__Image Image--lazyLoad Image--fadeIn" data-src="{{ image_url }}"
                        data-widths="[{{ supported_sizes }}]" data-sizes="auto" alt="{{ variant_image.alt | escape }}">
                      <span class="Image__Loader"></span>
                    </div>
                  </div>
                {%- endfor -%}
              </div>

              <div class="VariantSelector__Info">
                <div class="VariantSelector__ChoiceList">
                  {%- for value in option.values -%}
                    {%- assign min_price_for_variant = product.price_max -%}
                    {%- for variant in product.variants -%}
                      {%- if variant[option_index] == value -%}
                      {%- assign min_price_for_variant = min_price_for_variant | at_most: variant.price -%}
                      {%- endif -%}
                    {%- endfor -%}
                    <div class="VariantSelector__Choice {% if value == option.selected_value %}is-selected{% endif %}">
                      <div class="VariantSelector__ChoiceColor">
                        {%- assign downcase_value = value | downcase -%}

                        {%- assign color_swatch_name = value | handle | append: '.png' -%}
                        {%- assign color_swatch_image = images[color_swatch_name] -%}

                        <span
                          class="VariantSelector__ColorSwatch {% if downcase_value == 'white' %}VariantSelector__ColorSwatch--white{% endif %}"
                          style="background-color: {{ value | replace: ' ', '' | downcase }}; {% if color_swatch_image != blank %}background-image: url({{ color_swatch_image | img_url: '64x64' }}){% endif %}"></span>
                        <span class="VariantSelector__ChoiceValue">{{ value }}</span>
                      </div>
                      <div class="VariantSelector__ChoicePrice">
                        {%- if available_prices_for_option_value.size > 1 -%}
                        {%- capture formatted_min_price -%}<span >{{ min_price_for_variant |
                          money_without_trailing_zeros }}</span>{%- endcapture -%}
                        <span class="Heading Text--subdued">{{ 'product.form.from_price_html' | t: min_price: formatted_min_price
                          }}</span>
                        {%- else -%}
                        <span class="Heading Text--subdued" >{{ min_price_for_variant |
                          money_without_trailing_zeros }}</span>
                        {%- endif -%}
                      </div>
                    </div>
                  {%- endfor -%}
                </div>

                <button type="button" class="VariantSelector__Button Button Button--primary Button--full"
                  data-action="select-variant">{{- 'product.form.select_model' | t -}}</button>
              </div>
            </div>
            {%- else -%}
            <div id="{{ popover_id }}" class="OptionSelector Popover Popover--withMinWidth" aria-hidden="true">
              <header class="Popover__Header">
                <button type="button" class="Popover__Close Icon-Wrapper--clickable" data-action="close-popover">{% include
                  'icon' with 'close' %}</button>
                <span class="Popover__Title Heading u-h4">{{ option.name | escape }}</span>
              </header>

              <div class="Popover__Content">
                <div class="Popover__ValueList" data-scrollable>
                  {%- for value in option.values -%}
                  <button type="button"
                    class="Popover__Value {% if value == option.selected_value %}is-selected{% endif %} Heading Link Link--primary u-h6"
                    data-value="{{ value | escape }}" data-option-position="{{ option.position }}" data-action="select-value">
                    {{- value | escape -}}
                  </button>
                  {%- endfor -%}
                </div>

                {%- assign size_chart_page = pages['size-chart'] -%}

                {%- if show_option_label == false and size_label contains downcase_option and size_chart_page != empty -%}
                <button type="button" class="Popover__FooterHelp Heading Link Link--primary Text--subdued u-h6"
                  data-action="-modal" aria-controls="modal-{{ size_chart_page.handle }}">
                  {{- 'product.form.size_chart' | t -}}
                </button>
                {%- endif -%}
              </div>
            </div>
          {%- endif -%}
        {%- endcapture -%}

        {%- assign product_popovers = product_popovers | append: popover_html -%}
      
      {%- endif -%}
    </div>
  {%- endfor -%}
  {% comment %} product options {% endcomment %}

{% if isFrame == false %}
  {%- comment -%} Frames as a separate product{%- endcomment -%}
    <div class="ProductForm__Option ProductForm__Option--labelled">        
      <div class="dp-product-section-frame-main" data-orientation="horizontal">
        <div class="dp-product-section-head">
          <span class="label">Choose Frame <span class="dp-product-section-head-frame-value">No Frame</span></span>
          <span id="frame-choose" class="size__ChartLink dp-product-section-head-italic">Frame Info</span>
          <div id="cart-popup-overlay">
          </div>
        </div>
        <div class="dp-product-section-swatch-selectors-container open">
          <div class="swatch-frameInfo-list">
                <div class="dp-frame-swatch-main">
                    <input id="noframe" class="dp-product-section-swatch-selector-input" type="radio" name="frame" title="none" value="0" checked="checked" >
                    <label for="noframe" class="dp-product-section-swatch-selector currently-selected-swatch-display ">
                    <div class="dp-product-section-swatch-value-combine-selector">
                        <div style="background-color: #eaeaea;" class="noframe svelte-u7o1iy"></div>
                    </div>  
                    
                    <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon--wide icon-chevron-down" viewBox="0 0 498.98 284.49">
                        <defs></defs>
                        <path fill="#231f20" d="M80.93 271.76A35 35 0 0 1 140.68 247l189.74 189.75L520.16 247a35 35 0 1 1 49.5 49.5L355.17 511a35 35 0 0 1-49.5 0L91.18 296.5a34.89 34.89 0 0 1-10.25-24.74z" transform="translate(-80.93 -236.76)"></path>
                    </svg>
                    </label>
                </div>
                    {%- comment -%}                
                    <div class="dp-product-section-swatch-selector-price">
                        <span class="reset-money"></span>   
                    </div> {%- endcomment -%}
                
                {%- for black_frame in black_frames.variants -%}
                    {%- if black_frame.title == selected_variant.title  -%}
                    {% assign variant_measures = black_frame.title | split: ' ' %}
                    <div class="dp-frame-swatch-main">
                        <input id="black-frame" class="dp-product-section-swatch-selector-input" type="radio" name="frame" title="black" value="{{black_frame.id}}" >
                        <label for="black-frame" class="dp-product-section-swatch-selector "  >
                        <div class="dp-product-section-swatch-value-combine-selector">
                            <div style="background-color: black;" class=" svelte-u7o1iy"></div>
                        </div>
                        {%- comment -%}client asked to hide frames dimensions
                        <div class="dp-product-section-swatch-size-selector-dimensions">
                            <span id="reset-frame-size">{{variant_measures[1]}} / {{variant_measures.last}}</span>
                        </div>{%- endcomment -%}
                        
                        
                        <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon--wide icon-chevron-down" viewBox="0 0 498.98 284.49">
                            <defs></defs>
                            <path fill="#231f20" d="M80.93 271.76A35 35 0 0 1 140.68 247l189.74 189.75L520.16 247a35 35 0 1 1 49.5 49.5L355.17 511a35 35 0 0 1-49.5 0L91.18 296.5a34.89 34.89 0 0 1-10.25-24.74z" transform="translate(-80.93 -236.76)"></path>
                        </svg>
                        
                        </label>
                    </div>
                    {% comment %}
                        <div class="dp-product-section-swatch-selector-price"> 
                            {% if black_frame.compare_at_price > 0 %}
                                <span id="reset-compare-price" class="reset-compare-price" ><span class="money">{{ black_frame.compare_at_price | money_without_trailing_zeros }}</span></span>
                            {% endif %}  
                            <span id="reset-frame-money" class="reset-money" ><span class="money">{{ black_frame.price | money_without_trailing_zeros }}</span></span>   
                        </div>
                    {% endcomment %}
                    {%- endif -%}
                {%- endfor -%}

                {%- for white_frame in white_frames.variants -%}
                {%- if white_frame.title == selected_variant.title  -%}
                    {% assign variant_measures = white_frame.title | split: ' ' %}
                    <div class="dp-frame-swatch-main">
                        <input id="white-frame" class="dp-product-section-swatch-selector-input" type="radio" name="frame" title="white" value="{{white_frame.id}}" >
                        <label for="white-frame" class="dp-product-section-swatch-selector ">
                        <div class="dp-product-section-swatch-value-combine-selector">
                            <div style="background-color: white;border: 1px solid black;" class="svelte-u7o1iy"></div>
                        </div>
                        
                        {%- comment -%}client asked to hide frames dimensions
                        <div class="dp-product-section-swatch-size-selector-dimensions">
                            <span id="reset-frame-size">{{variant_measures[1]}} / {{variant_measures.last}}</span>
                        </div>{%- endcomment -%}
                        
                        
                        <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon--wide icon-chevron-down" viewBox="0 0 498.98 284.49">
                            <defs></defs>
                            <path fill="#231f20" d="M80.93 271.76A35 35 0 0 1 140.68 247l189.74 189.75L520.16 247a35 35 0 1 1 49.5 49.5L355.17 511a35 35 0 0 1-49.5 0L91.18 296.5a34.89 34.89 0 0 1-10.25-24.74z" transform="translate(-80.93 -236.76)"></path>
                        </svg>
                        </label>
                    </div>
                    {% comment %}
                        <div class="dp-product-section-swatch-selector-price">
                            {% if white_frame.compare_at_price > 0 %}
                                <span id="reset-compare-price" class="reset-compare-price" ><span class="money">{{ white_frame.compare_at_price | money_without_trailing_zeros }}</span></span>
                            {% endif %}
                            <span id="reset-frame-money" class="reset-money" ><span class="money">{{ white_frame.price | money_without_trailing_zeros }}</span></span>   
                        </div>
                    {% endcomment %}
                    {%- endif -%}
                {%- endfor -%}

                {%- for oak_frame in oak_frames.variants -%}
                    {%- if oak_frame.title == selected_variant.title  -%}
                    {% assign variant_measures = oak_frame.title | split: ' ' %}
                    <div class="dp-frame-swatch-main">
                            <input id="oak-frame" class="dp-product-section-swatch-selector-input" type="radio" name="frame" title="oak" value="{{oak_frame.id}}">
                            <label for="oak-frame" class="dp-product-section-swatch-selector ">
                                <div class="dp-product-section-swatch-value-combine-selector">
                                <div style="background-color: #d1af84;" class=" svelte-u7o1iy"></div>
                                </div>
                                {%- comment -%}client asked to hide frames dimensions
                                <div class="dp-product-section-swatch-size-selector-dimensions">
                                <span id="reset-frame-size">{{variant_measures[1]}} / {{variant_measures.last}}</span>
                                </div>{%- endcomment -%}
                                
                                <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon--wide icon-chevron-down" viewBox="0 0 498.98 284.49">
                                <defs></defs>
                                <path fill="#231f20" d="M80.93 271.76A35 35 0 0 1 140.68 247l189.74 189.75L520.16 247a35 35 0 1 1 49.5 49.5L355.17 511a35 35 0 0 1-49.5 0L91.18 296.5a34.89 34.89 0 0 1-10.25-24.74z" transform="translate(-80.93 -236.76)"></path>
                                </svg>
                            </label>
                    </div>
                    {% comment %}
                        <div class="dp-product-section-swatch-selector-price">
                            {%- if oak_frame.compare_at_price > 0 -%}
                                <span id="reset-compare-price" class="reset-compare-price" ><span class="money">{{ oak_frame.compare_at_price | money_without_trailing_zeros }}</span></span>
                            {%- endif -%}
                            <span id="reset-frame-money" class="reset-money" ><span class="money">{{ oak_frame.price | money_without_trailing_zeros }}</span></span>
                            
                        </div>
                    {% endcomment %}
                    {%- endif -%}
                {%- endfor -%}
            </div>
            <style>
              .dp-product-section-swatch-selector-unavailable {
                font-family:'Adobe Caslon Pro';
                text-align: right;
                font-size:13px;
                display:flex;
                color: #707070;
              /*   width: 25%; */
              }
            </style>
            <div class="dp-product-section-swatch-selector-price" style="display: none;">
              <span id="reset-compare-price" class="reset-compare-price" ><span class="money"></span></span>
              <span id="reset-frame-money" class="reset-money" ><span class="money"></span></span>
            </div>
            <div class="dp-product-section-swatch-selector-unavailable" id="reset-frame-unavailable" style="display: none;">
              <span class="frame-unavailable">Frame Not Available</span>
            </div>
        </div>
      </div>
      {% comment %} Gallery Mat Board{% endcomment %}
      {% for mat_board_product_variant in mat_board_product.variants %}
        {% if selected_variant.option1 == mat_board_product_variant.option1 %}
          {% assign mat_board_product_id = mat_board_product_variant.id %}
          {% assign mat_board_product_price = mat_board_product_variant.price %}
          {% assign mat_board_product_price_compare_at = mat_board_product_variant.compare_at_price %}
          {% break %}
        {% endif %}
      {% endfor %}
      <div class="passehidden" id="passe-container" data-orientation="horizontal">
        <div class="passecontainer">
          <div id="mat_board_product_container" class=" passe-text-icon-container passe-text-icon-container-faded">
            <div class="mat_board_input_container"> 
              <input type="checkbox" id="mat_board_input" name="gallery-no-frame" value="{{mat_board_product_id}}" price="{{mat_board_product_price}}" disabled >
            </div>
            <div id="mat_board_toptext_icon_container" class="passe-toptext-icon-container passe-toptext-icon-container-noframe">
                <span class="passe-toptext-title"> Add a Gallery Mat Board</span><img class="passe-gallery-experience-icon passe-gallery-experience-icon-small" id="gallery-experience-choose" src="{{ 'question-mark.svg' |  asset_url }}" alt="i">
            </div>
          </div>
          <div class="passe-money">
            <span id="reset-passe-money-compare" class="reset-compare-price">{{ mat_board_product_price_compare_at |
              money_without_trailing_zeros }}</span>
            <span id="reset-passe-money" >{{ mat_board_product_price |
              money_without_trailing_zeros }}</span>
          </div>
        </div>
      </div>
      {% comment %} Gallery Mat Board {% endcomment %}     
    </div>
    {%- comment -%} Frames as a separate product {%- endcomment -%}
    {%- comment -%} matboard for frames starts here {%- endcomment -%}
  {% elsif isFrame == true %}
    <div class="ProductForm__Option ProductForm__Option--labelled">
      {% comment %} Gallery Mat Board{% endcomment %}
      {% for mat_board_product_variant in mat_board_product.variants %}
        {% if selected_variant.option1 == mat_board_product_variant.option1 %}
          {% assign mat_board_product_id = mat_board_product_variant.id %}
          {% assign mat_board_product_price = mat_board_product_variant.price %}
          {% assign mat_board_product_price_compare_at = mat_board_product_variant.compare_at_price %}
          {% break %}
        {% endif %}
      {% endfor %}
      <div class="passehidden" id="passe-container" data-orientation="horizontal">
        <div class="passecontainer">
          <div id="mat_board_product_container" class=" passe-text-icon-container passe-text-icon-container-faded">
            <div class="mat_board_input_container"> 
              <input type="checkbox" id="mat_board_input" name="gallery-no-frame" value="{{mat_board_product_id}}" price="{{mat_board_product_price}}" disabled >
            </div>
            <div id="mat_board_toptext_icon_container" class="passe-toptext-icon-container passe-toptext-icon-container-noframe">
                <span class="passe-toptext-title"> Add a Gallery Mat Board</span><img class="passe-gallery-experience-icon passe-gallery-experience-icon-small" id="gallery-experience-choose" src="{{ 'question-mark.svg' |  asset_url }}" alt="i">
            </div>
          </div>
          <div class="passe-money">
            <span id="reset-passe-money-compare" class="reset-compare-price">{{ mat_board_product_price_compare_at |
              money_without_trailing_zeros }}</span>
            <span id="reset-passe-money" >{{ mat_board_product_price |
              money_without_trailing_zeros }}</span>
          </div>
        </div>
      </div>
      {% comment %} Gallery Mat Board {% endcomment %}     
    </div>
    {%- comment -%} matboard for frames ends here {%- endcomment -%}
  {% endif %}
  {% comment %}
  ---------------------------------------------------
  CHARITY SLIDER WITHIN VARIANT OPTIONS
  ---------------------------------------------------
  {% endcomment %}
  <div class="ProductForm__Option {% if show_option_label %}ProductForm__Option--labelled{% endif %} charity-organisations-container">
    <div class="dp-product-section-head">
      <span class="label">Choose your Donation</span>
      <div id="cart-popup-overlay">
      </div>
    </div>
    <div class="product__cart--form dp-donation-main-dropdown">
      <div class="xs-pwyw">
        <div id="donation-drop-down-icon" class="xs-p-text open-menu">
          <div id="selected_organization">
            <span></span>
          </div>
          <div class="donation-price-icon-container">
            <span id="xs-charity-price" data-money-convertible>${{ '0' }}</span>
            <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon--wide icon-chevron-down"
              viewBox="0 0 498.98 284.49">
              <defs></defs>
              <path fill="#231f20"
                d="M80.93 271.76A35 35 0 0 1 140.68 247l189.74 189.75L520.16 247a35 35 0 1 1 49.5 49.5L355.17 511a35 35 0 0 1-49.5 0L91.18 296.5a34.89 34.89 0 0 1-10.25-24.74z"
                transform="translate(-80.93 -236.76)"></path>
            </svg>
          </div>
        </div>
        <div id="donation-drop-down-menu">
          <div class="acc__panel">
            {% for c_variant in charity_product.variants %}
            <div class="custom-radio">
              {% assign charity_title = c_variant.title |  downcase |  replace: " ", "-"  %}
              {% if charity_title == "non-violence" %}
                {% assign charity_title = "non-violence-project" %}
              {% endif %}
              <input {% if has_charity %}{% if charity_title == charity_org %} checked {% endif %}{% else %}{% if forloop.index==1 %} checked {% endif %}{% endif %} required class="required" id="select_organization"
                data-title="{{c_variant.title}}" type="radio" name="donation" value="{{c_variant.id}}"
                data-gtm-form-interact-field-id="1" />
              <span"donation_container_text">{{c_variant.title}}</span>
            </div>
            {% endfor %}
          </div>
          <div class="xs-p-wrap">
            <div id="xs-price-range">
              {% for block in section.blocks %}
              {% if block.type == 'product-marks' %}
              {% if block.settings.product_handle == product.handle%}
              <div class="xs-marks-container">
                {% if block.settings.show_mark_1 and block.settings.amount_1 != blank and block.settings.label_1 !=
                blank %}
                <div class="xs-mark" id="mark-1" data-mark-amount="{{ block.settings.amount_1 }}">
                  <span class="label-1" id="label-mark-1">{{ block.settings.label_1 }}</span>
                </div>
                {% endif %}
                {% if block.settings.show_mark_2 and block.settings.amount_2 != blank and block.settings.label_2 !=
                blank %}
                <div class="xs-mark" id="mark-2" data-mark-amount="{{ block.settings.amount_2 }}">
                  <span class="label-2" id="label-mark-2">{{ block.settings.label_2 }}</span>
                </div>
                {% endif %}
                {% if block.settings.show_mark_3 and block.settings.amount_3 != blank and block.settings.label_3 !=
                blank %}
                <div class="xs-mark" id="mark-3" data-mark-amount="{{ block.settings.amount_3 }}">
                  <span class="label-3" id="label-mark-3">{{ block.settings.label_3 }}</span>
                </div>
                {% endif %}
              </div>
              {% endif %}
              {% endif %}
              {% endfor %}
            </div>
          </div>
          <span id="donation-choose" class="about-your-donation">About your donation <img class="question-icon" src="{{ 'question-mark.svg' |  asset_url }}" alt="i"></span>
        </div>
      </div>
    </div>
  </div>
  {% comment %} Charity Slider {% endcomment %}

  {% assign ubx_video_present = false %}

  {% for blk  in section.blocks %}
    {% if blk.type == "ubx_video" %}
      {% assign ubx_video_present = true %}
      {% break %}
    {% endif %}
  {% endfor %}

  {% if ubx_video_present %}
    <div class="ubx-action-container">
      <div class="ubx-action-headline">
        <div class="ubx-heading">{{ section.settings.ubx_title }}</div>
        <div class="ubx-subheading">|&nbsp; {{ section.settings.ubx_subtitle }}</div>
      </div>
      <div class="ubx-action-videos">
        {% assign ubx_index = 0 %}
        {% for blk in section.blocks %}
          {% if blk.type == "ubx_video" %}
            {% assign ubx_index = ubx_index | plus: 1 %}
            <div class="ubx-action-item" data-index="{{ ubx_index }}">
              {{ blk.settings.video.preview_image | image_url: width: 200 | image_tag }}
              <div class="ubx-play-icon">
                <img src="{{ 'play-icon.png' |  asset_url }}" alt="play icon" width="100" height="100">
              </div>
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>

    <aside class="NewsletterPopup site__black--popup soldout-popup ubx-popup" data-section-id="{{ section.id }}" data-section-type="newsletter-popup" aria-hidden="true">
      <div class="popup_header">
        <span class="popup_title">{{ section.settings.ubx_title }}</span>
        <div class="popup_close" data-action="close-popup" aria-label="{{ 'general.popup.close' | t }}">{% include 'icon' with 'close' %}</div>
      </div>     
      <div class="popup_content">  
        {%- if section.settings.ubx_content != blank -%}
          <div class="NewsletterPopup__Content">
            <p>{{section.settings.ubx_content}}</p>
          </div>
        {%- endif -%}
      </div>
      <div class="ubx-video-container">
        {% assign ubx_index = 0 %}
        {% for blk in section.blocks %}
          {% if blk.type == "ubx_video" %}
            {% assign ubx_index = ubx_index | plus: 1 %}
            <div class="ubx-video-item" data-index="{{ ubx_index }}">
              {{ blk.settings.video | video_tag: autoplay: false, loop: true, muted: true, controls: false, image_size: '600x' }}
            </div>
          {% endif %}
        {% endfor %}
      </div>     
    </aside>
        
    <script>
      $(document).ready(function(){
        var ubx_flkty = $(".ubx-video-container").flickity({
          "prevNextButtons": false,
          "pageDots": true,
          "cellAlign": 'left',
          "contain": true
        });

        $('.ubx-popup .popup_close').click(function(){
          $('.ubx-popup').removeClass('visible');
          document.getElementById("cart-popup-overlay").style.display = "none";
        });

        $('.ubx-action-item').click(function () {
          let index = parseInt($(this).attr("data-index"));
          $('.ubx-popup').addClass('visible');
          document.getElementById("cart-popup-overlay").style.display = "block";
          $(".ubx-video-container").flickity( 'select', index - 1 );
          let video_element = $(`.ubx-video-item[data-index="${index}"] video`);
          video_element.click();
        });

        $('.ubx-video-item video').click(function(){
          let video_element = $(this).get(0);
          $('.ubx-video-item video').not(video_element).each(function() {
            $(this).get(0).pause();
            $(this).get(0).load();
          });
          if(!video_element.paused) {
            video_element.pause();
            video_element.load()
          }
          else {
            video_element.play();
          }

        });
      });
    </script>
  {% endif %}

  <div class="no-js ProductForm__Option">
    <div class="Select Select--primary">
      {%- include 'icon' with 'select-arrow' -%}

      <select id="product-select-{{ product.id }}" name="id" title="Variant">
        {%- for variant in product.variants -%}
        <option {% if variant==selected_variant %}selected="selected" {% endif %} {% unless variant.available
          %}disabled="disabled" {% endunless %} value="{{ variant.id }}" data-sku="{{ variant.sku }}">{{ variant.title
          }} - {{ variant.price | money }}</option>
        {%- endfor -%}
      </select>
    </div>
  </div>
  {%- else -%}
  <input type="hidden" name="id" data-sku="{{ selected_variant.sku }}" value="{{ selected_variant.id }}">
  {%- endunless -%}

  {%- if section.settings.show_quantity_selector -%}
  {%- if show_option_label -%}
  <span class="ProductForm__Label">{{ 'product.form.quantity' | t }}:</span>
  {%- endif -%}

  <div class="ProductForm__QuantitySelector">
    <div class="QuantitySelector QuantitySelector--large">
      {%- assign quantity_minus_one = line_item.quantity | minus: 1 -%}

      <span class="QuantitySelector__Button Link Link--secondary" data-action="decrease-quantity">{% include 'icon' with
        'minus' %}</span>
      <input type="text" class="QuantitySelector__CurrentQuantity" pattern="[0-9]*" name="quantity" value="1">
      <span class="QuantitySelector__Button Link Link--secondary" data-action="increase-quantity">{% include 'icon' with
        'plus' %}</span>
    </div>
  </div>
  {%- else -%}
  <input type="hidden" name="quantity" value="1">
  {%- endif -%}

  {{ 'api.jquery.js' | shopify_asset_url | script_tag }}

  {%- if section.settings.show_inventory_quantity -%}
  {%- assign hide_inventory_quantity_by_default = false -%}

  {%- if selected_variant.inventory_management == blank or selected_variant.inventory_quantity <= 0 -%} {%- assign
    hide_inventory_quantity_by_default=true -%} {%- endif -%} {%- if section.settings.inventory_quantity_threshold !=0
    and selected_variant.inventory_quantity> section.settings.inventory_quantity_threshold -%}
    {%- assign hide_inventory_quantity_by_default = true -%}
    {%- endif -%}

    <p class="ProductForm__Inventory Text--subdued" {% if hide_inventory_quantity_by_default %}style="display: none" {%
      endif %}>
      {%- if section.settings.inventory_quantity_threshold == 0 -%}
      {{- 'product.form.inventory_quantity_count' | t: count: selected_variant.inventory_quantity -}}
      {%- else -%}
      {{- 'product.form.low_inventory_quantity_count' | t: count: selected_variant.inventory_quantity -}}
      {%- endif -%}
    </p>
    {%- endif -%}
</div>

{%- comment -%}
--------------------------------------------------------------------------------------------------------------------
ADD TO CART BUTTON
--------------------------------------------------------------------------------------------------------------------
{%- endcomment -%}
<style>
    #cartbutton--reload.bottomFixed{
      width: 100%;
      height: 82px;
      position: fixed;
      left: 0px;
      bottom: 0px;
      text-align: center;
      background-color: white;
      z-index: 9;
      visibility: visible;
      transform: translateY(0%);
    }
    .bottomFixed-child{
      margin: 0;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -75%);
      width: 90%;
    }
    #first-truststar.bottomFixed-truststar{
      position: fixed;
      bottom: 5px;
      z-index: 9;
    }
    /* .CLS-placeholder{
      margin-top: 30px;
      height: 48px;
      position: relative;
    } */
    /* .CLS-truststar-placeholder{
      height: 24px;
      position: relative;
      margin-top: 12px;
    }
    #cartbutton--reload, #first-truststar{
      position: absolute;
      width: 100%;
    } */
    #bottom-fixer{
      margin-top: 0px;
    }
  </style>

  <div class="Button--primary--default" id="cartbutton--reload">
    {% comment %}
    <button type="button" id="xs-add-to-cart-btn"
      class="product__add-to-cart button ProductForm__AddToCart Button Button--primary Button--full">
      <span class="add-to-cart__text">Add to cart</span>
      <div class="cart-button-price-wrap">
        <div class="actual-price">$67</div>
        <div class="actual-price-discount">$209</div>
      </div>
      <div class="cart-animation" style="display:none">1</div>
    </button>
    {% endcomment %}

    <button type="submit" id="bottom-fixer" class="product__add-to-cart button thinnerButton ProductForm__AddToCart Button {% if selected_variant.available and section.settings.show_payment_button == false %}Button--primary{% else %}Button--secondary{% endif %} Button--full" 
      {% if selected_variant.available %}data-action="add-to-cart" {% else %}disabled="disabled" {% endif %}>
      {%- if selected_variant.available -%}
      <span class="add-to-cart__text smallerText" id="text_changer">{% if product.template_suffix == 'pre-order' %}{{ 'product.form.pre_order' | t }}{%
        else %}{{ 'product.form.add_to_cart' | t }}{% endif %}</span>
      <div class="cart-animation" style="display:none"><span id="animation_digit"></span></div>
      {%- if section.settings.show_price_in_button -%}
      <span class="Button__SeparatorLine separator-align-right"></span>
      {% if product.selected_or_first_available_variant.compare_at_price != null and product.selected_or_first_available_variant.compare_at_price != 0 %}
        <span class="smallerText price-align-right-top"  >{{ selected_variant.price | money_without_trailing_zeros }}</span>  
        <span id ="compare_at_price_style_mob" class="price_compareVal smallerText price-align-right-bottom" >{{ selected_variant.compare_at_price | money_without_trailing_zeros }}</span>
      {% else %}
        <span class="smallerText price-align-right"  >{{ selected_variant.price | money_without_trailing_zeros }}</span>  
      {% endif %}
      
      {%- endif -%}
      {%- else -%}
      {{- 'product.form.sold_out' | t -}}
      {%- endif -%}
      <div class="cart-button-price-wrap">
        <div class="actual-price-discount" >
          {% if product.selected_or_first_available_variant.compare_at_price != null and product.selected_or_first_available_variant.compare_at_price != 0 %}
            <span id ="compare_at_price_style_button" class="price_compareVal" ><span class="money">{{ product.selected_or_first_available_variant.compare_at_price | money_without_trailing_zeros }}</span></span>
          {% endif %}
        </div>
        <div class="actual-price">
          <span id="xs-currentVal_button" class="price_currentVal" ><span class="money">{{ product.selected_or_first_available_variant.price | money_without_trailing_zeros }}</span></span>
        </div>
      </div>
    </button>
    <div class="separate-text-free-shipping extented_info leftAligned_imp">
      <div id="first-truststar" class="info-with-icon">
        <div class="green_dot"></div>
        <p><strong>Free Shipping</strong> over <span data-money-convertible>$89</span> <span id="countryInTruststar"> </span>
        <img class="truststar-flag" src="" id="truststar-flag" >
        </p>
      </div>
    </div>
  </div>

{%- if section.settings.show_payment_button and product.template_suffix != 'pre-order' -%}
{{ form | payment_button }}
{%- endif -%}

{% comment %} Extended Info {% endcomment %}
<div class="extented_info leftAligned_imp checkmarked-blocks" >
  {% comment %} <div id="first-truststar" style="display: none;" class="info-with-icon">
    <p><img class="icon_img" src="{{ 'FreeShippingabove.svg' |  asset_url }}">
      <strong>Free Delivery</strong> over <span data-money-convertible>$69</span> <span id="countryInTruststar"> </span>
      <img class="truststar-flag" src="" id="truststar-flag" >
    </p>
  </div> {% endcomment %}
  <div class="info-with-icon Block_imp">
    <p>
      <img class="icon_img" src="{{ 'checkmark.png' |  asset_url }}">
      <strong>Buy 2 Get 1 Free</strong><span  id="custom_color_offer_ending"> [Limited Run]</span>
    </p>
  </div>
  <div class="info-with-icon Block_imp">
    <p>
      <img class="icon_img" src="{{ 'checkmark.png' |  asset_url }}">
      Certificate of authenticity included
    </p>
  </div>
  <div class="info-with-icon Block_imp">
    <p>
      <img class="icon_img" src="{{ 'checkmark.png' |  asset_url }}">
      Delivery within a week | Super easy returns
    </p>
  </div>
  <div class="info-with-icon Block_imp">
    <p>
      <img class="icon_img" src="{{ 'checkmark.png' |  asset_url }}">
      Secure payment
      <img class="icon_img_payment" src="{{ 'paypal_black.png' |  asset_img_url }}">
      <img class="icon_img_payment" src="{{ 'amex_black.png' |  asset_img_url }}">
      <img class="icon_img_payment" src="{{ 'visa_black.png' |  asset_img_url }}">
      <img class="icon_img_payment" src="{{ 'mastercard_black.png' |  asset_img_url }}">
    </p>
  </div>
  {%- comment -%} <ul class="infoExt-list">
    <li>
      <div class="info-with-icon">
        {%- include 'icon' with 'trust-shield' -%}
        Free Shipping over $59
      </div>
    </li>
    <li>
      <div class="info-with-icon">
        {%- include 'icon' with 'trust-shield' -%}
        30,000 Artworks Sold
      </div>
    </li>
  </ul> {%- endcomment -%}
</div>

<div class="help-container">
  <span id="zendesk-popup-control" class="help-text">Need help?</span>
</div>
{% comment %} Extended Info {% endcomment %}

{%- endform -%}

<div class="headQuote-content pdp-custom-stars">
  <div class="new-trust-line">
    <strong>Excellent</strong>&nbsp;&nbsp; 4.9 out of 5
  </div>
   <div class="heading__stars">
    <img src="{{ 'Truststars_5.png' | asset_img_url: '100x100' }}" alt="">
   </div>
</div>

{%- if size_chart_page != empty -%}
{%- comment -%}If we have a size chart we capture the modal content (it must be displayed outside the form for proper
positioning){%- endcomment -%}

{%- capture product_modals -%}
<div id="modal-{{ size_chart_page.handle }}" class="Modal Modal--dark Modal--fullScreen Modal--pageContent"
  aria-hidden="true" role="dialog" data-scrollable>
  <header class="Modal__Header">
    <h2 class="Modal__Title Heading u-h1">{{ size_chart_page.title }}</h2>
  </header>

  <div class="Modal__Content Rte">
    <div class="Container Container--extraNarrow">
      {{- size_chart_page.content -}}
    </div>
  </div>

  <button class="Modal__Close RoundButton RoundButton--large" data-animate-bottom data-action="close-modal">{% include
    'icon' with 'close' %}</button>
</div>
{%- endcapture -%}
{%- endif -%}

{%- if section.settings.show_payment_button and selected_variant.available == false -%}
<style>
  #shopify-section- {
      {
      section.id
    }
  }

  .shopify-payment-button {
    display: none;
  }
</style>
{%- endif -%}

{% comment %}
------------------------------------------------------------------------------
Product Data. This must be outputted for all products (including home page).

IMPORTANT: THIS CODE IS VITAL. DO NOT EDIT IT NOT REMOVE IT. MAKE SURE TO KEEP
THE EXACT SAME ATTRIBUTES.
------------------------------------------------------------------------------
{% endcomment %}

<script type="application/json" data-product-json>
  {
    "product": {{ product | json }},
    "selected_variant_id": {{ selected_variant.id }}
    {%- if section.settings.show_inventory_quantity -%}
      ,"inventories": {
        {%- for variant in product.variants -%}
          {%- assign inventory_message = '' -%}

          {%- if section.settings.inventory_quantity_threshold == 0 -%}
            {%- capture inventory_message -%}{{- 'product.form.inventory_quantity_count' | t: count: variant.inventory_quantity -}}{%- endcapture -%}
          {%- else -%}
            {%- capture inventory_message -%}{{- 'product.form.low_inventory_quantity_count' | t: count: variant.inventory_quantity -}}{%- endcapture -%}
          {%- endif -%}

          "{{ variant.id }}": {
            "inventory_management": {{ variant.inventory_management | json }},
            "inventory_policy": {{ variant.inventory_policy | json }},
            "inventory_quantity": {{ variant.inventory_quantity | json }},
            "inventory_message": {{ inventory_message | json }}
          }{% unless forloop.last %},{% endunless %}
        {%- endfor -%}
      }
    {%- endif -%}
  }
</script>

<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
<script type="text/javascript"
  src="//cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>

<script>

  const formatHandleize = str => {
    return str
      .toLowerCase()
      .replace(/[^a-z0-9]+/g, '-')
      .replace(/-$/, '')
      .replace(/^-/, '');
  };

  $('.dp-product-section-size-selector').click(function () {
    if ($(this).hasClass('size-selector-other')) {
      // toggle dropdown
      $('.size-selector-other').toggleClass('is-active');

    } else if ($(this).closest('.size-selector-other').length) {
      // other value selected
      $('.size-selector-other').addClass('is-selected')
        .removeClass('is-active');
      $('.size-selector-other-label span').text(
        $(this).find('.dp-product-section-size-selector-name').text());

    } else {
      // non-other values selected
      $('.size-selector-other').removeClass('is-selected');
    }

    let selectedVariant = formatHandleize($(this).find('input:checked + .dp-product-section-size-selector .dp-product-section-size-selector-name').text());


  });

  $(window).click((e) => {
    // close dropdown when clicking outside
    if (!$(e.target).hasClass('size-selector-other') &&
      !$(e.target).closest('.size-selector-other').length) {
      $('.size-selector-other').removeClass('is-active');
    }
  });

  if ($(window).width() <= 920) {
    $('.size-selector-other li').each(function () {
      $('.dp-product-section-size-selectors-container').append($(this).html());
    });

    $('.size-selector-other').remove();
  }

  //$('.dp-product-section-size-selector').click(function (event) {
    //$('.dp-product-section-size-selectors-container').toggleClass('open');
  //});

  $('.dp-product-section-swatch-selector').click(function () {
    if ($(this).hasClass('swatch-selector-other')) {
      // toggle dropdown
      $('.swatch-selector-other').toggleClass('is-active');

    } else if ($(this).closest('.swatch-selector-other').length) {
      // other value selected
      $('.dp-size-list-item').addClass('is-selected')
        .removeClass('is-active');
      $('.swatch-selector-other-label span').text(
        $(this).find('.dp-product-section-swatch').text());

    } else {
      // non-other values selected
      $('.swatch-selector-other').removeClass('is-selected');
    }

    let selectedVariant = formatHandleize($(this).find('input:checked + .dp-product-section-swatch-selector .dp-product-section-swatch').text());


  });
  
  $('.inches').click(function () {
    $('.inches').addClass('selected');
    $('.centimeters').removeClass('selected');
    $('.centimeters-detail').css('display','none');
    $('.inches-detail').css('display','block');
  });
  $('.centimeters').click(function () {
    $('.centimeters').addClass('selected');
    $('.inches').removeClass('selected');
    $('.inches-detail').css('display','none');
    $('.centimeters-detail').css('display','block');
  });

  $(window).click((e) => {
    // close dropdown when clicking outside
    if (!$(e.target).hasClass('swatch-selector-other') &&
      !$(e.target).closest('.swatch-selector-other').length) {
      $('.swatch-selector-other').removeClass('is-active');
    }
  });

  if ($(window).width() <= 920) {
    $('.swatch-selector-other li').each(function () {
      $('.dp-product-section-swatch-selectors-container').append($(this).html());
    });

    $('.swatch-selector-other').remove();
  }

  $('.dp-product-section-swatch-selector').click(function (event) {
    $('.dp-product-section-swatch-selectors-container').toggleClass('opens');
  });

  $('#donation-drop-down-icon').click(function () {
    if ($(this).hasClass('open-menu')) {
      $(this).removeClass('open-menu');
      $('#donation-drop-down-menu').css('display', 'none');
    }
    else {
      $(this).addClass('open-menu');
      $('#donation-drop-down-menu').css('display', 'block');
    }
  })
</script>

<script>
  $(document).ready(function () {
    var user__country = localStorage.getItem('user__country');
    var country_flag = localStorage.getItem('userCurrencyFlag');
    var curerncy_country_name = localStorage.getItem('country_name_show');
    var usercountryelement = document.getElementById('countryInTruststar');
    var truststar_flag = document.getElementById('truststar-flag');

    if (user__country)
    { 
      usercountryelement.innerHTML = ' to ' + user__country; 
    }

    if (truststar_flag && country_flag)
    { 
      if (user__country == curerncy_country_name)
      truststar_flag.src = 'https://cdn.shopify.com/s/files/1/0082/5619/2602/files/' + country_flag + '.png'; 
      else 
      truststar_flag.src = '';
    }

    //var cm_at_final_discount = 0;
    var xs_product_id = "{{product.id }}";

    function postAddToCart(payBtn, payBtnText, actual_variant_price, cm_at_price, price, animation_count, previoustext) {
      Shopify.getCart((cart) => {
        //cart.cm_at_final_discount = parseInt(cm_at_final_discount) + parseInt(cm_at_price_to_pass.replace("$", ""));
        $("#animation_digit").text(animation_count);
        $(".Header__CartDot").text(cart.item_count);
        $(".Header__CartDot").addClass('is-visible');
        var target = '#target__';
        var animation = '.cart-animation';
        // $(animation).css({ 'display': 'block' });
        // if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
        //   target = '#target__mobile';
        // }
        var cart = $(target);
        var imgtodrag = $(animation);
        // if (imgtodrag) {
        //   var imgclone = imgtodrag.clone()
        //     .offset({
        //       top: imgtodrag.offset().top,
        //       left: imgtodrag.offset().left
        //     })
        //     .css({
        //       'opacity': '1',
        //       'position': 'absolute',
        //       'z-index': '100'
        //     })
        //     .appendTo($('body'))
        //     .animate({
        //       'top': cart.offset().top + 10,
        //       'left': cart.offset().left + 10
        //     }, 1000, 'easeInOutExpo');

        //   setTimeout(function () {
        //     cart.effect("shake", {
        //       times: 2
        //     }, 200);
        //   }, 1500);

        //   imgclone.animate({
        //     'width': 0,
        //     'height': 0
        //   }, function () {
        //     $(this).detach()
        //   });
        // }
        // setTimeout(function () {
        //   $(animation).css({ 'display': 'none' });
        // }, 1500);
      });
      payBtn.addClass('success_btn');
      // payBtnText.text(' ');
      //from here all calculations for pricing in cart label
      var price_header_ = $("#price_header_").html().replace(/\<span(.|\s)*?\<\/span\>/, '');
      if (newCurrency == 'SEK' || newCurrency == 'NOK')
        price_header_ = Number(price_header_.replace(/[^0-9-]+/g, ""));
      else
        price_header_ = Number(price_header_.replace(/[^0-9\.-]+/g, ""));
      if (isNaN(price_header_)) price_header_ = 0;

      var cm_at_price_header_ = $("#cm_at_price_header_").html().replace(/\<span(.|\s)*?\<\/span\>/, '');
      if (newCurrency == 'SEK' || newCurrency == 'NOK')
        cm_at_price_header_ = Number(cm_at_price_header_.replace(/[^0-9-]+/g, ""));
      else
        cm_at_price_header_ = Number(cm_at_price_header_.replace(/[^0-9\.-]+/g, ""));
      if (isNaN(cm_at_price_header_)) cm_at_price_header_ = 0;

      var updated_price_header_ = price_header_ + Number(actual_variant_price.replace(/[^0-9\.-]+/g, "")) + price;
      var updated_cm_at_price_header_ = cm_at_price_header_ + Number(cm_at_price.replace(/[^0-9\.-]+/g, ""));

      var currency_symbol = cm_at_price.replace(/[\d\., ]/g, '');
      if (newCurrency == 'SEK' || newCurrency == 'NOK') {
        updated_price_header_ = Math.round(updated_price_header_) + ' ' + currency_symbol;
        updated_cm_at_price_header_ = Math.round(updated_cm_at_price_header_) + ' ' + currency_symbol;

      } else {
        updated_price_header_ = currency_symbol + Math.round(updated_price_header_);
        updated_cm_at_price_header_ = currency_symbol + Math.round(updated_cm_at_price_header_);
      }
      $("#price_header").html(updated_price_header_);
      $("#price_header_").html(updated_price_header_);
      $("#cm_at_price_header").html(updated_cm_at_price_header_);
      $("#cm_at_price_header_").html(updated_cm_at_price_header_);

      //till here cart icon / label price calculations
      setTimeout(function () {
        payBtn.removeClass('success_btn');
        payBtnText.text(previoustext);
        $('.delivery-message-text').hide();
        $('.geotargetlygeocontent1629294920005').hide();
        $('#add-to-cart-link').addClass('success').html('✓ Added to the cart! <a href="/cart"> View cart</a><br>');
      }, 2000);
    }

    function changeMarksState(value) {
      var current_value = value / 100;

      if ($("#mark-1").length > 0) {
        var mark1_amount = $("#mark-1").data("mark-amount");
        if (current_value >= mark1_amount) {
          $("#mark-1 .label-1").addClass("active-1");
        } else {
          $("#mark-1 .label-1").removeClass("active-1");
        }
      }

      if ($("#mark-2").length > 0) {
        var mark2_amount = $("#mark-2").data("mark-amount");
        if (current_value >= mark2_amount) {
          $("#mark-2 .label-2").addClass("active-2");
          $("#mark-1").css("z-index", '20');
        } else {
          $("#mark-2 .label-2").removeClass("active-2");
          $("#mark-1").css("z-index", '25');
        }
      }

      if ($("#mark-3").length > 0) {
        var mark3_amount = $("#mark-3").data("mark-amount");
        if (current_value >= mark3_amount) {
          $("#mark-3 .label-3").addClass("active-3");
          $("#mark-2").css("z-index", '21');
        } else {
          $("#mark-3 .label-3").removeClass("active-3");
          $("#mark-2").css("z-index", '24');
        }
      }
    }

    const arrows = $("<span class='xs-r-arrows'></span>").append('<div class="encircle bounce animated"> <div class="arrow"> </div> </div>');
    const slider = $("#xs-price-range");
    const productSelect = $('select[name="id"]');
    const xspw = $(".xs-pwyw");
    var newCurrency = $('.CurrencySelector__Select').val();
    var charitypriceamount = 0;
    let xid = productSelect.val();

    if (xid == null) {
      $('.charity-organisations-container').hide();
      // xspw.hide();
    } else {
      //conversion of currency start
      var xVariantPrice = xVariants[xid].price;
      var xVariantCompare_at_price = xVariants[xid].compare_at_price;
      var actual_variant_price = (Shopify.formatMoney(xVariantPrice, xs_format)).replace(/\.00$/, '');
      var cm_at_price = (Shopify.formatMoney(xVariantCompare_at_price, xs_format)).replace(/\.00$/, '');
      var cm_at_price_to_pass = (Shopify.formatMoney(xVariants[xid].compare_at_price, "{{ shop.money_format }}")).replace(/\.00$/, '');

      /*$('.CurrencySelector__Select').on('change', function () {
        location.reload(true);
      });*/
      //conversion of currency end
    }

    //stock bar
    var maxPrice = Math.round(Currency.convert(100, 'USD', newCurrency));
    maxPrice = maxPrice * 100;
    var a = 'amount_no_decimals';
    var amount = "{" + "{" + a + "}}";
    var moneyFormats = { 
      "USD": "$" + amount, 
      "EUR": "€" + amount, 
      "GBP": "£" + amount, 
      "CAD": "$" + amount, 
      "SEK": amount + " kr", 
      "DKK": amount + " kr", 
      "NOK": amount + " kr", 
      "AUD": "$" + amount 
    };
    var xs_format = moneyFormats[newCurrency] || '{{ amount }}';
    var selectedframe = false; 
    if( $("label[for='black-frame']").hasClass("currently-selected-swatch-display") ||
    $("label[for='white-frame']").hasClass("currently-selected-swatch-display") ||
    $("label[for='oak-frame']").hasClass("currently-selected-swatch-display") ) {
      selectedframe = true;
    }
    var textaddtocart = 'ADD ART TO CART';
    var actual_variant_price = (Shopify.formatMoney(xVariantPrice, xs_format)).replace(/\.00$/, '');

    var cm_at_price = (Shopify.formatMoney(xVariantCompare_at_price, xs_format)).replace(/\.00$/, '');
    var cm_at_price_to_pass = (Shopify.formatMoney(xVariants[xid].compare_at_price, "{{ shop.money_format }}")).replace(/\.00$/, '');
    
    if(selectedframe  && charitypriceamount > 0){
      textaddtocart = 'ADD ART & FRAME + DONATION TO CART';
    }
    else if(charitypriceamount > 0){
      textaddtocart = 'ADD ART + DONATION TO CART';
    }
    else if(selectedframe){
      textaddtocart = 'ADD ART & FRAME TO CART';
    }
    else if(isFrame){
      textaddtocart = 'ADD TO CART';
    }
    else{
      textaddtocart = 'ADD ART TO CART';
    }
  
    function button_update(text, price, cm_price) {
        var buttonstyle = `{%- if selected_variant.available -%}
        <div class = "left__text">
        <span class="add-to-cart__text smallerText text-vertical-center" id="text_changer">{% if product.template_suffix == 'pre-order' %}{{ 'product.form.pre_order' | t }}{%
          else %}`+ text + `{% endif %}</span>
        </div>
        <div class="cart-animation" style="display:none"><span id="animation_digit"></span></div>
        {%- if section.settings.show_price_in_button -%}
        <span class="Button__SeparatorLine separator-align-right"></span>
        {% if product.selected_or_first_available_variant.compare_at_price != null and product.selected_or_first_available_variant.compare_at_price != 0 %}
          <span class="smallerText price-align-right-top"  >` + price + `</span>  
          <span id ="compare_at_price_style_mob" class="price_compareVal smallerText price-align-right-bottom" >` + cm_price + `</span>
        {% else %}
          <span class="smallerText price-align-right"  >` + price + `</span>  
        {% endif %}
        
        {%- endif -%}
        {%- else -%}
        {{- 'product.form.sold_out' | t -}}
        {%- endif -%}
        <div class="cart-button-price-wrap">
          <div class="actual-price-discount" >
            {% if product.selected_or_first_available_variant.compare_at_price != null and product.selected_or_first_available_variant.compare_at_price != 0 %}
              <span id ="compare_at_price_style_button-2" class="price_compareVal" ><span class="money">{{ product.selected_or_first_available_variant.compare_at_price | money_without_trailing_zeros }}</span></span>
            {% endif %}
          </div>
          <div class="actual-price">
            <span id="xs-currentVal_button-2" class="price_currentVal" ><span class="money">{{ product.selected_or_first_available_variant.price | money_without_trailing_zeros }}</span></span>
          </div>
        </div>`;
        $(".ProductForm__AddToCart").html(buttonstyle);
        $(".ProductForm__AddToCart").attr('id', 'bottom-fixer');
        var price = $("#xs-currentVal").text();
        var cm_at_price = $("#compare_at_price_style").text();
        $("#xs-currentVal_button").text(price);
        $("#compare_at_price_style_button").html(cm_at_price);
        $("#xs-currentVal_button-2").html(price);
        $("#compare_at_price_style_button-2").html(cm_at_price);

        var $wind = $(window);
        if ( ($wind.scrollTop() >= (250)) && (screen.width < 640) ) {
          $('#cartbutton--reload').addClass('bottomFixed');
          $('#bottom-fixer').addClass('bottomFixed-child');
          $('#first-truststar').addClass('bottomFixed-truststar');
        }
        else{
          $('#cartbutton--reload').removeClass('bottomFixed');
          $('#bottom-fixer').removeClass('bottomFixed-child');
          $('#first-truststar').removeClass('bottomFixed-truststar');
        }

      }

    button_update(textaddtocart, actual_variant_price, cm_at_price );
    var distance = $('.ProductForm__AddToCart').offset().top,
    $window = $(window);

    $window.scroll(function() {
        if ( ($window.scrollTop() >= (250)) && (screen.width < 640) ) {
            $('#cartbutton--reload').addClass('bottomFixed');
            $('#bottom-fixer').addClass('bottomFixed-child');
            $('#first-truststar').addClass('bottomFixed-truststar');
        }
        else{
            $('#cartbutton--reload').removeClass('bottomFixed');
            $('#bottom-fixer').removeClass('bottomFixed-child');
            $('#first-truststar').removeClass('bottomFixed-truststar');
        }
    });

    let iprice = 0;
      slider.slider({
        range: "min",
        min: iprice,
        max: maxPrice,
        step: 100,
        value: iprice,
        slide: function (e, ui) {
          $("#xs-charity-price").html((Shopify.formatMoney(ui.value, xs_format)).replace(/\.00$/, ''));
          changeMarksState(ui.value);
          charitypriceamount = ui.value;
          var selectedframe = false;
          if( $("label[for='black-frame']").hasClass("currently-selected-swatch-display") ||
          $("label[for='white-frame']").hasClass("currently-selected-swatch-display") ||
          $("label[for='oak-frame']").hasClass("currently-selected-swatch-display") ) {
            selectedframe = true;
          }
          if(selectedframe && charitypriceamount > 0){
            textaddtocart = 'ADD ART & FRAME + DONATION TO CART';
          }
          else if(charitypriceamount > 0){
            textaddtocart = 'ADD ART + DONATION TO CART';
          }
          else if(selectedframe){
            textaddtocart = 'ADD ART & FRAME TO CART';
          }
          else if(isFrame){
            textaddtocart = 'ADD TO CART';
          }
          else{
            textaddtocart = 'ADD ART TO CART';
          }
          var price = $("#xs-currentVal").text();
          var cm_at_price = $("#compare_at_price_style").text();

          button_update(textaddtocart, price, cm_at_price);
          
          return;
        }
      });
      xspw.show();

      var minimum_price = iprice / 100;
      var maximum_price = maxPrice;
      maximum_price = maximum_price / 100;
      var diff_in_price = maximum_price - minimum_price;
      var mark_1_price = $("#mark-1").data("mark-amount");
      var mark_2_price = $("#mark-2").data("mark-amount");
      var mark_3_price = $("#mark-3").data("mark-amount");

      var left_mark_1 = ((mark_1_price - minimum_price) * 100) / diff_in_price;
      var left_mark_2 = ((mark_2_price - minimum_price) * 100) / diff_in_price;
      var left_mark_3 = ((mark_3_price - minimum_price) * 100) / diff_in_price;

      $("#mark-1").css("left", left_mark_1 + "%");
      $("#mark-2").css("left", left_mark_2 + "%");
      $("#mark-3").css("left", left_mark_3 + "%");

    //stock bar
    slider.slider("widget").find(".ui-slider-handle").first().append(arrows);

    /* 
    -------------- when the variant changes ---------------
    */
    $(`section.Product`).on("variant:changed", function (e) {
      console.log('variant change');
      let variant = e.originalEvent.detail.variant;
      let xid = variant.id;
      var selectedframe = false;
      $("#reset-passe-money").css("color", "#707070");
      $(".passe-money").css("opacity", "0.3");
      if( $("label[for='black-frame']").hasClass("currently-selected-swatch-display") ||
      $("label[for='white-frame']").hasClass("currently-selected-swatch-display") ||
      $("label[for='oak-frame']").hasClass("currently-selected-swatch-display") ) {
        selectedframe = true;
        $("#reset-passe-money").css("color", "#af182b");
        $(".passe-money").css("opacity", "1");
      }
      if(isFrame) {
        $("#reset-passe-money").css("color", "#af182b");
        $(".passe-money").css("opacity", "1");
      }
      console.log('herere');
      xVariantPrice = xVariants[xid].price;
      xVariantCompare_at_price = xVariants[xid].compare_at_price;
      let selected_frame_id = $('input[name="frame"]:checked').val();
      let selected_frame_price = 0;
      let selected_frame_compare_at_price = 0;
      if (selected_frame_id != 0 && (typeof selected_frame_id !== "undefined")){
        selected_frame_price = frames_all_variants[selected_frame_id].price;
        selected_frame_compare_at_price = frames_all_variants[selected_frame_id].compare_at_price;
      } 
      // selected_frame_price = Math.round(Currency.convert(selected_frame_price, 'USD', newCurrency));
      // selected_frame_compare_at_price = Math.round(Currency.convert(selected_frame_compare_at_price, 'USD', newCurrency));
      if(selected_frame_price > 0 ) {
        $('.dp-product-section-swatch-selector-price').css('display','block');
      } else {
        $('.dp-product-section-swatch-selector-price').css('display','none');
      }
      $("#reset-frame-money").html((Shopify.formatMoney(selected_frame_price, xs_format)).replace(/\.00$/, ''));
      $("#reset-compare-price").html((Shopify.formatMoney(selected_frame_compare_at_price, xs_format)).replace(/\.00$/, ''));
      $("#xs-currentVal").html((Shopify.formatMoney(xVariantPrice + selected_frame_price, xs_format)).replace(/\.00$/, ''));
      $("#compare_at_price_style").html((Shopify.formatMoney(xVariantCompare_at_price + selected_frame_compare_at_price, xs_format)).replace(/\.00$/, ''));
      $("#xs-currentVal_mob").html((Shopify.formatMoney(xVariantPrice + selected_frame_price, xs_format)).replace(/\.00$/, ''));
      $("#compare_at_price_style_mob").html((Shopify.formatMoney(xVariantCompare_at_price + selected_frame_compare_at_price, xs_format)).replace(/\.00$/, ''));
      actual_variant_price = (Shopify.formatMoney(xVariantPrice + selected_frame_price, xs_format)).replace(/\.00$/, '');
      cm_at_price = (Shopify.formatMoney(xVariantCompare_at_price + selected_frame_compare_at_price, xs_format)).replace(/\.00$/, '');
      cm_at_price_to_pass = (Shopify.formatMoney(xVariants[xid].compare_at_price, "{{ shop.money_format }}")).replace(/\.00$/, '');
      
      if(selectedframe  && charitypriceamount > 0){
        textaddtocart = 'ADD ART & FRAME + DONATION TO CART';
      }
      else if(charitypriceamount > 0){
        textaddtocart = 'ADD ART + DONATION TO CART';
      }
      else if(selectedframe){
        textaddtocart = 'ADD ART & FRAME TO CART';
      }          
      else if(isFrame){
        textaddtocart = 'ADD TO CART';
      }
      else{
        textaddtocart = 'ADD ART TO CART';
      } 
      if ( variant.available){
        $(".ProductForm__AddToCart").append("<div class='cart-animation' style='display:none'><span id='animation_digit'></span></div>");
        $(".ProductForm__AddToCart span").addClass('add-to-cart__text');
        button_update(textaddtocart, actual_variant_price, cm_at_price );
        $("#xs-currentVal_button").html((Shopify.formatMoney(xVariantPrice + selected_frame_price, xs_format)).replace(/\.00$/, ''));
        $("#compare_at_price_style_button").html((Shopify.formatMoney(xVariantCompare_at_price + selected_frame_compare_at_price, xs_format)).replace(/\.00$/, ''));
        $("#xs-currentVal_button-2").html((Shopify.formatMoney(xVariantPrice + selected_frame_price, xs_format)).replace(/\.00$/, ''));
        $("#compare_at_price_style_button-2").html((Shopify.formatMoney(xVariantCompare_at_price + selected_frame_compare_at_price, xs_format)).replace(/\.00$/, ''));
        xspw.show();
      }

      /* add to cart action called */
      let payBtn = $(".ProductForm__AddToCart"),
        payBtnText = $(".add-to-cart__text");
      payBtn.on('click', function (t) {
        payBtnText = $(".add-to-cart__text");
        var previousText = payBtnText.text();
        t.preventDefault();
        payBtnText.text("Adding ...");       

        let formData = {
          'items': [{
            'id': xid,
            'quantity': 1,
            properties: {
              /*_compare_at_price: cm_at_price_to_pass*/
            }
          }]
        };
        if( $('input[name="frame"]:checked').val() && $('input[name="frame"]:checked').val() != 0 ){

        var frame_cm_at_price_to_pass = (Shopify.formatMoney(frames_all_variants[selected_frame_id].compare_at_price, "{{ shop.money_format }}")).replace(/\.00$/, '');
        formData['items'].push({ 
          'id': $('input[name="frame"]:checked').val(), 
          properties: {
              /*_compare_at_price: frame_cm_at_price_to_pass*/
            } });
        
          if ($("#mat_board_input").is(':checked')) {
              formData['items'].push({ 'id': $("#mat_board_input").attr('value') });
          }
        }
        else if (typeof isFrame !== "undefined" && isFrame) {
          if ($("#mat_board_input").is(':checked')) {
              formData['items'].push({ 'id': $("#mat_board_input").attr('value') });
          }
        }

        fetch(window.Shopify.routes.root + 'cart/add.js', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(formData)
        })
          .then(response => {
              let price = parseInt(slider.slider("value"));
              price = price / 100;
              let after_currency_convert = Math.round(Currency.convert(price, $('.CurrencySelector__Select').val(), 'USD'));
              let organization = document.querySelector('input[name="donation"]:checked');

            if (price > 0 && organization != null) {
              let org_id = organization.value;
              let charity_product_id = "{{charity_product.id }}";
              // let charity_product_id = "7815554695405";
              let reqUrl = `https://custom-pricing-app.herokuapp.com/pay/${charity_product_id}/${org_id}/${after_currency_convert * 100}`;

              $.ajax({
                url: reqUrl,
                success: function (e) {
                  let charityData = {
                    'items': [{ 
                      'id': e.variant_id,
                      'quantity': 1
                    }]
                  }; 
                  fetch(window.Shopify.routes.root + 'cart/add.js', {
                    method: 'POST',
                    headers: {
                      'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(charityData)
                  }).then(response => {
                      postAddToCart(payBtn, payBtnText, actual_variant_price, cm_at_price, price, formData['items'].length + 1, previousText);
                  }).catch((error) => {
                      postAddToCart(payBtn, payBtnText, actual_variant_price, cm_at_price, 0, formData['items'].length, previousText);
                  });
                }
              });
            }
          
            else {
              postAddToCart(payBtn, payBtnText, actual_variant_price, cm_at_price, 0, formData['items'].length, previousText);
            }
          })
          .catch((error) => {
            console.error('Error:', error);
          });
      });
      /* add to cart action called finished */

    });

    /* add to cart action called default case*/
    let payBtn = $(".ProductForm__AddToCart"),
      payBtnText = $(".add-to-cart__text");

    payBtn.on('click', function (t) {
      payBtnText = $(".add-to-cart__text");
      var previousText = payBtnText.text();
      t.preventDefault();
      payBtnText.text("Adding ...");
      
      let formData = {
        'items': [{
          'id': xid,
          'quantity': 1,
          properties: {
            /*_compare_at_price: cm_at_price_to_pass*/
          }
        }]
      };

      if( $('input[name="frame"]:checked').val() && $('input[name="frame"]:checked').val() != 0 ){
        var frame_cm_at_price_to_pass = (Shopify.formatMoney(frames_all_variants[selected_frame_id].compare_at_price, "{{ shop.money_format }}")).replace(/\.00$/, '');
        formData['items'].push({ 
          'id': $('input[name="frame"]:checked').val(),
          properties: {
              /*_compare_at_price: frame_cm_at_price_to_pass*/
            }
          });
        if ($("#mat_board_input").is(':checked')) {
          console('mat board is checked ...');
            formData['items'].push({ 'id': $("#mat_board_input").attr('value') });
        }
      }
      else if (typeof isFrame !== "undefined" && isFrame) {
        if ($("#mat_board_input").is(':checked')) {
            formData['items'].push({ 'id': $("#mat_board_input").attr('value') });
        }
      }

      fetch(window.Shopify.routes.root + 'cart/add.js', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(formData)
      })
        .then(response => {
          let price = parseInt(slider.slider("value"));
          price = price / 100;
          let after_currency_convert = Math.round(Currency.convert(price, $('.CurrencySelector__Select').val(), 'USD'));
          let organization = document.querySelector('input[name="donation"]:checked');

          if (price > 0 && organization != null) {
            let org_id = organization.value;
            let charity_product_id = "{{charity_product.id }}";
            // let charity_product_id = "7815554695405";
            let reqUrl = `https://custom-pricing-app.herokuapp.com/pay/${charity_product_id}/${org_id}/${after_currency_convert * 100}`;

            $.ajax({
              url: reqUrl,
              success: function (e) {
                let charityData = {
                  'items': [{
                    'id': e.variant_id,
                    'quantity': 1
                  }]
                };
                fetch(window.Shopify.routes.root + 'cart/add.js', {
                  method: 'POST',
                  headers: {
                    'Content-Type': 'application/json'
                  },
                  body: JSON.stringify(charityData)
                }).then(response => {
                    postAddToCart(payBtn, payBtnText, actual_variant_price, cm_at_price, price, formData['items'].length + 1, previousText);
                }).catch((error) => {
                    postAddToCart(payBtn, payBtnText, actual_variant_price, cm_at_price, 0, formData['items'].length, previousText);
                });
              }
            });
          }
          else {
            postAddToCart(payBtn, payBtnText, actual_variant_price, cm_at_price, 0, formData['items'].length, previousText);
          }
        })
        .catch((error) => {
          console.error('Error:', error);
        });


    });
    /* add to cart action called finished default case */

  });

</script>

<script>
  $(document).ready(function () {
    let org = document.querySelector('input[name="donation"]:checked');
    let value = $(org).attr('data-title');
    $("#selected_organization span").text(value);


    $('input[type=radio][name="donation"]').change(function () {
      let org = document.querySelector('input[name="donation"]:checked');
      let value = $(org).attr('data-title');
      $("#selected_organization span").text(value);

    });

    $('#size-chart').click(function () {
      $('.size-chart').addClass('visible');
      document.getElementById("cart-popup-overlay").style.display = "block";
    });

    $('#frame-choose').click(function () {
      $('.frame-choose').addClass('visible');
      document.getElementById("cart-popup-overlay").style.display = "block";
    });

    $('#donation-choose').click(function () {
      $('.donation-choose').addClass('visible');
      document.getElementById("cart-popup-overlay").style.display = "block";
    });

    $('#gallery-experience-choose').click(function () {
      $('.gallery-experience-choose').addClass('visible');
      document.getElementById("cart-popup-overlay").style.display = "block";
    });

    $('#price-detail-desktop, #price-detail-mob').click(function(){
      $('.price-detail').addClass('visible');
      document.getElementById("cart-popup-overlay").style.display = "block";
    });

    $('#zendesk-popup-control').click(function(){
      $('.zendesk-popup').addClass('visible');
      document.getElementById("cart-popup-overlay").style.display = "block";
    });

  })
</script>

<script>
  
  $('input[name="frame"]').on('change', function(event) {
          if (event.target.title == 'none'){
            $("label[for='noframe']").addClass('currently-selected-swatch-display');
            $(".dp-product-section-head-frame-value").text('No Frame');
            $("label[for='black-frame']").removeClass('currently-selected-swatch-display');
            $("label[for='white-frame']").removeClass('currently-selected-swatch-display');
            $("label[for='oak-frame']").removeClass('currently-selected-swatch-display');

            $('#mat_board_product_container').addClass('passe-text-icon-container-faded');
            $("#mat_board_input").prop('checked', false);
            $("#mat_board_input").prop('disabled', true);
            $("#mat_board_input").attr('name', 'gallery-no-frame');
            $("#gallery-experience-choose").removeClass('passe-gallery-experience-icon-small');
            $("#mat_board_toptext_icon_container").addClass("passe-toptext-icon-container-noframe");

          }
          else if (event.target.title == 'black'){
            $("label[for='black-frame']").addClass('currently-selected-swatch-display');
            $(".dp-product-section-head-frame-value").text('Black Gallery');
            
            $("label[for='white-frame']").removeClass('currently-selected-swatch-display');
            $("label[for='oak-frame']").removeClass('currently-selected-swatch-display');
            $("label[for='noframe']").removeClass('currently-selected-swatch-display');
            activate_mat_board()
          }
          else if (event.target.title == 'white'){
            $("label[for='white-frame']").addClass('currently-selected-swatch-display');
            $(".dp-product-section-head-frame-value").text('White Gallery');
            $("label[for='black-frame']").removeClass('currently-selected-swatch-display');
            $("label[for='oak-frame']").removeClass('currently-selected-swatch-display');
            $("label[for='noframe']").removeClass('currently-selected-swatch-display');
            activate_mat_board()
          }
          else if (event.target.title == 'oak'){
            $("label[for='oak-frame']").addClass('currently-selected-swatch-display');
            $(".dp-product-section-head-frame-value").text('Oak Gallery');
            $("label[for='white-frame']").removeClass('currently-selected-swatch-display');
            $("label[for='black-frame']").removeClass('currently-selected-swatch-display');
            $("label[for='noframe']").removeClass('currently-selected-swatch-display');
            activate_mat_board();
          }
    });

    function activate_mat_board() {
      $('#mat_board_product_container').removeClass('passe-text-icon-container-faded');
      $("#mat_board_input").prop('disabled', false);
      $("#mat_board_input").attr('name', 'gallery-frame');
      $("#gallery-experience-choose").addClass('passe-gallery-experience-icon-small');
      $("#mat_board_toptext_icon_container").removeClass("passe-toptext-icon-container-noframe");
    }

</script>

{% if isFrame == true %}
  <script>
    $(`section.Product`).on("variant:changed", function(e) {
      var variant = event.detail.variant;
      var previousVariant = event.detail.previousVariant;
      
      if (variant.option1 != previousVariant.option1) {
        if (variant.option1 == 'MEDIUM 12x16" 30x40cm') {
          if (! variant.option2) {  
            $("#mat_board_input").attr('value', mat_board_variants[0].id);
            $("#mat_board_input").attr('price', mat_board_variants[0].price);
            $("#reset-passe-money").text(mat_board_variants[0].price);
            $("#reset-passe-money-compare").text(mat_board_variants[0].compare_at_price);

          }
        } else if (variant.option1 == 'LARGE 20x28" 50x70cm') {
          $("label[for='option-product-template-0-1']").addClass('currently-selected-size-display');
          if (! variant.option2) {
            $("#mat_board_input").attr('value', mat_board_variants[1].id);
            $("#mat_board_input").attr('price', mat_board_variants[1].price);
            $("#reset-passe-money").text(mat_board_variants[1].price);
            $("#reset-passe-money-compare").text(mat_board_variants[1].compare_at_price);
          }

        } else if (variant.option1 == 'X-Large 28x40" 70x100cm') {
          if (! variant.option2) {
            $("#mat_board_input").attr('value', mat_board_variants[2].id);
            $("#mat_board_input").attr('price', mat_board_variants[2].price);
            $("#reset-passe-money").text(mat_board_variants[2].price);
            $("#reset-passe-money-compare").text(mat_board_variants[2].compare_at_price);

          }
        } 
      }
    });
    activate_mat_board();
    $("#reset-passe-money").css("color", "#af182b");
    $(".passe-money").css("opacity", "1");
  </script>
 {% endif %}